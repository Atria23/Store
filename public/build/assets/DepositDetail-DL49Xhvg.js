import{r as l,j as e,a as E}from"./app-D0MNKr12.js";import{z as j}from"./index-Bbo_bglS.js";const F=({deposit:t})=>{const[y,d]=l.useState(!1),[b,m]=l.useState(""),[x,f]=l.useState(!1),[u,h]=l.useState(null),[N,w]=l.useState(""),[v,k]=l.useState(!1);l.useState(!1);const[S,_]=l.useState(!1);l.useEffect(()=>{if(t.status==="pending"&&t.expires_at){const a=()=>{const r=new Date(t.expires_at)-new Date;if(r<=0)w("Expired"),fetch("/deposit/check-expired",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then(()=>{location.reload()});else{const n=Math.floor(r/36e5),L=Math.floor(r%(1e3*60*60)/(1e3*60)),P=Math.floor(r%(1e3*60)/1e3);w(`${n.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`)}};a();const s=setInterval(a,1e3);return()=>clearInterval(s)}},[t.status,t.expires_at]);const i=a=>`Rp${parseInt(a).toLocaleString("id-ID")}`,I=new Date(t.created_at).toLocaleString("id-ID",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),A=new Date(t.expires_at).toLocaleString("id-ID",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),R=a=>a?a.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):"",C=(a,s)=>{navigator.clipboard.writeText(a),s(!0),setTimeout(()=>s(!1),1500)},D=(a,s)=>{navigator.clipboard.writeText(a),s(!0),setTimeout(()=>s(!1),1500)},M=a=>{confirm("Are you sure you want to confirm this deposit?")&&(f(!0),h(a),fetch(`/deposit/confirm/${a}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({})}).then(s=>s.json()).then(s=>{s.success?window.location.reload():alert("Konfirmasi gagal: tidak ditemukan data yang sesuai")}).catch(s=>{alert("Terjadi kesalahan: "+s.message)}).finally(()=>{f(!1),h(null)}))},c=a=>{m(a),d(!0)},T=()=>{d(!1),m("")},[o,g]=l.useState(null),p=(a,s)=>{if(!s)return;g(a);const r=new FormData;r.append("proof_of_payment",s),fetch(`/deposit/upload-proof/${a}`,{method:"POST",body:r,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(n=>n.json()).then(n=>{n.success?(alert("Proof of payment uploaded successfully!"),window.location.href="/deposit"):alert("Failed to upload proof of payment.")}).catch(n=>{console.error("Error uploading proof:",n),alert("An error occurred while uploading proof.")}).finally(()=>g(null))};return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Detail Deposit"}),e.jsxs("div",{className:"mx-auto w-full max-w-[500px] flex flex-col min-h-screen",children:[e.jsx("header",{className:"fixed top-0 left-1/2 -translate-x-1/2 max-w-[500px] w-full z-10 flex flex-row space-x-4 justify-start items-center px-4 py-2 bg-main",children:e.jsxs("div",{className:"w-full flex flex-row space-x-4 items-center justify-start",children:[e.jsx("button",{className:"shrink-0 w-6 h-6",onClick:()=>window.history.back(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",className:"w-6 h-6",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),e.jsx("div",{className:"font-utama text-white font-bold text-lg",children:"Detail Deposit"})]})}),e.jsxs("main",{className:"w-full w-max-[500px] flex flex-col space-y-3 mt-12 [@media(max-width:277px)]:mt-[76px] p-4 bg-main-white",children:[t.status==="pending"&&e.jsx("div",{className:"w-full text-justify bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-3 text-sm rounded-xl",children:"Pastikan melakukan pembayaran deposit sebelum batas pembayaran. Jika terdapat kesalahan nominal pembayaran, maka jumlah saldo masuk akan dikurangi 5%."}),e.jsxs("div",{className:"w-full flex flex-col space-y-8 items-center justify-center p-6 rounded-3xl bg-white shadow-md",children:[e.jsxs("div",{className:"w-full h-max flex flex-col space-y-4 items-start justify-center",children:[e.jsxs("div",{className:"w-full flex justify-center",children:[t.status==="pending"&&e.jsx("div",{className:"w-24 h-24 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"w-14 h-14 text-yellow-500",fill:"currentColor",children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z"})})}),t.status==="confirmed"&&e.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",className:"w-14 h-14 text-green-500",fill:"currentColor",children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}),t.status!=="pending"&&t.status!=="confirmed"&&e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-14 h-14 text-red-500",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"})})})]}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("span",{className:`text-center text-sm font-medium px-4 py-1 rounded-full ${t.status==="pending"?"text-yellow-700 bg-yellow-100":t.status==="confirmed"?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:["Transaksi ",t.status]})})]}),e.jsx("div",{className:"w-full h-px bg-gray-600"}),e.jsxs("div",{className:"w-full flex flex-col space-y-2 items-start justify-center",children:[e.jsxs("div",{className:"w-full flex flex-col space-y-2 items-start justify-start",children:[e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"ID"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm font-medium tracking-[0.1px] break-words flex items-center justify-end gap-1",children:e.jsx("div",{className:"flex items-center justify-end gap-2 text-sm font-medium text-right font-utama tracking-[0.1px]",children:v?e.jsx("div",{className:"w-20",children:e.jsx(j,{src:"https://lottie.host/519fbc9d-1e9b-4ddf-ab6f-14423aabd845/MtxYOaYcV8.lottie",autoplay:!0,loop:!1,style:{width:"100%",height:"100%"}})}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"break-words",children:t.id}),e.jsx("button",{onClick:()=>C(t.id,k),className:"text-main hover:text-blue-700 font-medium","aria-label":"Copy Ref Id",children:e.jsxs("svg",{className:"w-5 h-5 shrink-0","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{fillRule:"evenodd",d:"M7 9v6a4 4 0 0 0 4 4h4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1v2Z",clipRule:"evenodd"}),e.jsx("path",{fillRule:"evenodd",d:"M13 3.054V7H9.2a2 2 0 0 1 .281-.432l2.46-2.87A2 2 0 0 1 13 3.054ZM15 3v4a2 2 0 0 1-2 2H9v6a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-3Z",clipRule:"evenodd"})]})})]})})})]}),e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"Dibuat pada"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm font-medium tracking-[0.1px] break-words",children:I})]}),e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"Batas Pembayaran"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm text-red-500 font-medium tracking-[0.1px] break-words",children:t.status==="expired"?A:N})]}),e.jsx("div",{className:"w-full h-px border border-dashed border-gray-400 my-4"}),e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"Metode Pembayaran"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm font-medium tracking-[0.1px] break-words",children:R(t.payment_method)})]}),e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"Nominal"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm font-medium tracking-[0.1px] break-words",children:i(t.amount)})]}),e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"Kode Unik"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm font-medium tracking-[0.1px] break-words",children:i(t.unique_code)})]}),e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"Biaya Admin"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm font-medium tracking-[0.1px] break-words",children:i(t.admin_fee)})]}),e.jsx("div",{className:"w-full h-px border border-dashed border-gray-400 my-4"}),e.jsxs("div",{className:"w-full flex flex-row",children:[e.jsx("div",{className:"w-1/2 text-left font-utama text-sm text-gray-800 font-normal tracking-[0.25px] break-words",children:"Saldo Masuk"}),e.jsx("div",{className:"w-1/2 text-right font-utama text-sm font-medium tracking-[0.1px] break-words",children:i(t.get_saldo)})]})]}),e.jsx("div",{className:"w-full h-px border border-dashed border-gray-400 my-4"}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"text-md font-utama font-medium text-gray-700",children:"Total Bayar"}),e.jsx("span",{className:"text-md font-utama font-semibold text-black",children:i(t.total_pay)})]})]})]}),(t.payment_method==="qris_otomatis"||t.payment_method==="qris_dana"||t.payment_method==="qris_shopeepay"||t.payment_method==="qris_ovo"||t.payment_method==="qris_gopay")&&t.admin_account?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col space-y-4 items-center justify-center p-4 rounded-3xl bg-white shadow-md",children:[e.jsx("div",{className:"w-full h-max flex flex-col space-y-4 items-start justify-center",children:e.jsx("p",{className:"w-full font-utama font-semibold text-xl break-words text-wrap text-center",children:"Rekening QRIS"})}),e.jsx("div",{className:"w-full h-px bg-gray-600"}),e.jsx("img",{src:`/storage/${t.admin_account}`,alt:`QRIS ${t.payment_method}`,className:"w-64 object-cover cursor-pointer rounded",onClick:()=>c(`/storage/${t.admin_account}`)}),e.jsx("div",{className:"w-full h-max mt-2 flex flex-col items-center justify-center",children:e.jsx("button",{onClick:()=>c(`/storage/${t.admin_account}`),className:"w-full bg-main text-white p-2 rounded-xl hover:bg-blue-700 transition",children:"PERBESAR GAMBAR"})})]})}):t.admin_account&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col space-y-4 items-center justify-center p-4 rounded-3xl bg-white shadow-md",children:[e.jsx("div",{className:"w-full h-max flex flex-col space-y-4 items-start justify-center",children:e.jsx("p",{className:"w-full font-utama font-semibold text-xl break-words text-wrap text-center",children:"Rekening Pembayaran"})}),e.jsx("div",{className:"w-full h-px bg-gray-600"}),e.jsx("div",{className:"w-full h-max flex flex-col space-y-4 items-start justify-center",children:S?e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsx("div",{className:"w-20",children:e.jsx(j,{src:"https://lottie.host/519fbc9d-1e9b-4ddf-ab6f-14423aabd845/MtxYOaYcV8.lottie",autoplay:!0,loop:!1,style:{width:"100%",height:"100%"}})})}):e.jsx("p",{className:"w-full font-utama font-semibold text-xl break-words text-wrap text-center",children:t.admin_account})}),e.jsx("div",{className:"w-full h-max mt-2 flex flex-col items-center justify-center",children:e.jsx("button",{onClick:()=>D(t.admin_account,_),className:"w-full bg-main text-white p-2 rounded-xl hover:bg-blue-700 transition",children:"SALIN NOMOR REKENING"})})]})}),e.jsxs("div",{className:"w-full flex flex-col space-y-4 items-center justify-center p-4 rounded-3xl bg-white shadow-md",children:[e.jsx("div",{className:"w-full flex flex-col space-y-4 items-center justify-center",children:e.jsx("p",{className:"w-full font-utama font-semibold text-xl text-center break-words",children:"Unggah Bukti Pembayaran"})}),e.jsx("div",{className:"w-full h-px bg-gray-600"}),t.proof_of_payment?e.jsxs("div",{className:"w-full flex flex-col items-center justify-center space-y-4",children:[e.jsx("img",{src:`/proof-of-payment/${t.id}`,alt:"Proof of Payment",className:"w-64 object-cover rounded cursor-pointer",onClick:()=>c(`/proof-of-payment/${t.id}`)}),t.status==="pending"&&(!t.expires_at||new Date(t.expires_at)>new Date)&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"upload-proof",className:"w-full text-center bg-main text-white py-2 px-4 rounded-xl hover:bg-blue-700 cursor-pointer transition text-sm",children:"GANTI BUKTI PEMBAYARAN"}),e.jsx("input",{id:"upload-proof",type:"file",accept:"image/*",onChange:a=>p(t.id,a.target.files[0]),className:"hidden",disabled:o===t.id})]})]}):t.status==="confirmed"||new Date(t.expires_at)<=new Date?e.jsx("p",{className:"text-gray-400 text-center",children:"N/A"}):t.payment_method==="qris_otomatis"?e.jsx("button",{onClick:()=>M(t.id),className:"w-full bg-main text-white py-2 px-4 rounded-xl hover:bg-blue-700 transition",disabled:x||u===t.id,children:x&&u===t.id?"MENGKONFIRMASI...":"KONFIRMASI DEPOSIT"}):e.jsxs("div",{className:"w-full flex flex-col items-center justify-center space-y-2",children:[e.jsx("label",{htmlFor:"upload-proof",className:"w-full text-center bg-main text-white py-2 px-4 rounded-xl hover:bg-blue-700 cursor-pointer transition text-sm",children:"UNGGAH BUKTI PEMBAYARAN"}),e.jsx("input",{id:"upload-proof",type:"file",accept:"image/*",onChange:a=>p(t.id,a.target.files[0]),className:"hidden",disabled:o===t.id}),o===t.id&&e.jsx("p",{className:"text-sm text-gray-500 text-center",children:"Sedang mengunggah..."})]})]})]})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-center z-50",children:e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:T,className:"absolute top-0 right-0 text-white text-xl bg-red-500 rounded-full px-3 py-1 m-2",children:"×"}),e.jsx("img",{src:b,alt:"Preview",className:"max-w-full max-h-[80vh] rounded-lg shadow-lg"})]})})]})};export{F as default};
