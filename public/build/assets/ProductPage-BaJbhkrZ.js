import{q as je,r as a,y as Q,j as e,a as be,d as z}from"./app-iMurIanD.js";import{z as ve}from"./index-B0oulyMw.js";const Ne=({formula:r,onChange:l})=>{const[f,c]=a.useState([]),[v,h]=a.useState({}),[y,C]=a.useState("");a.useEffect(()=>{if(!r)return;const o=[];let i;const g=/\{(i\d+a?)\}/g;for(;(i=g.exec(r))!==null;)o.includes(i[1])||o.push(i[1]);c(o),h(o.reduce((j,p)=>({...j,[p]:""}),{}))},[r]),a.useEffect(()=>{if(!r||f.length===0)return;let o=r;for(const i of f)o=o.replaceAll(`{${i}}`,v[i]||"");C(o)},[v,r,f]),a.useEffect(()=>{l&&l(y)},[y]);const $=(o,i)=>{const j=o.includes("a")?i.replace(/\D/g,""):i;h(p=>({...p,[o]:j}))},u=f.length;return e.jsx("div",{className:`flex ${u===1?"flex-col":"flex-row gap-2"}`,children:f.map((o,i)=>e.jsx("input",{type:"text",className:`rounded-lg bg-neutral-100 border-2 border-gray-200 px-3 w-full focus:outline-none focus:ring-0 placeholder-gray-400 ${u>1?"flex-1":""}`,placeholder:`Input ${i+1}`,value:v[o]||"",onChange:g=>$(o,g.target.value)},i))})};function Se(){var X,J;const{category:r,brand:l,brands:f=[],type:c,types:v=[],isPulsaOrData:h,products:y=[],inputTypes:C,commission:$}=je().props,[u,o]=a.useState(""),[i,g]=a.useState(null),[j,p]=a.useState(""),[w,N]=a.useState(null),[I,V]=a.useState(""),[R,Z]=a.useState(null),[B,ee]=a.useState(null),[te,_]=a.useState(!1),[O,se]=a.useState(""),[ye,ae]=a.useState({}),[le,F]=a.useState(!1),[A,L]=a.useState(!1),[Y,ne]=a.useState(""),E=a.useRef(null),[re,oe]=a.useState(0),[ie,U]=a.useState(!1),ce=()=>{const t=window.location.href;navigator.clipboard.writeText(t).then(()=>{U(!0),setTimeout(()=>U(!1),2e3)}).catch(s=>{console.error("Gagal menyalin URL: ",s)})},de=t=>{oe(t.commission??0),N(null),L(!0)};a.useEffect(()=>{const t=s=>{E.current&&!E.current.contains(s.target)&&L(!1)};return A&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[A]);const G=v.filter(t=>t.name.toLowerCase().includes(O.toLowerCase())),xe=t=>{if(!I&&!u){alert("Masukkan ID Tujuan terlebih dahulu!");return}Q.get("/checkout",{id:t.id,customerNo:I,phone:u})},ue={Telkomsel:["0811","0812","0813","0821","0822","0823","0852","0853"],Indosat:["0814","0815","0816","0855","0856","0857","0858"],XL:["0817","0818","0819","0859","0877","0878"],Tri:["0895","0896","0897","0898","0899"],Axis:["0831","0832","0833","0838"],Smartfren:["0881","0882","0883","0884","0885","0886","0887","0888","0889"],"By.U":["0851"]};a.useEffect(()=>{if(h){const s=new URLSearchParams(window.location.search).get("phone")||"",n=K(s);o(n),W(n)}},[]);const me=t=>{const s=t.target.value,n=K(s);o(n),i&&clearTimeout(i),g(setTimeout(()=>{W(n),H({phone:n})},2e3))},K=t=>{if(!t)return"";let s=t.replace(/[^0-9]/g,"");return s.startsWith("62")?s="0"+s.substring(2):s.startsWith("+62")&&(s="0"+s.substring(3)),s},W=t=>{if(!t||t.length<4){p("");return}const s=t.substring(0,4);let n=null;if(Object.entries(ue).forEach(([m,D])=>{D.includes(s)&&(n=m)}),!n){p("Tidak Diketahui");return}const x=f.find(m=>m.name.toLowerCase().includes(n.toLowerCase())),d=x?x.name:n;p(d),d!==(l==null?void 0:l.name)&&H({phone:t,brand:d})},H=t=>{const s=new URLSearchParams(window.location.search);Object.entries(t).forEach(([x,d])=>{d?s.set(x,d):s.delete(x)});const n=`/c=${r==null?void 0:r.name}/b=${t.brand||(l==null?void 0:l.name)}`+(t.type||c!=null&&c.name?`/t=${t.type||(c==null?void 0:c.name)}`:"")+`?${s.toString()}`;Q.get(n,{},{replace:!0})},fe=()=>{const t=(c==null?void 0:c.example_image)||(l==null?void 0:l.example_image),s=(c==null?void 0:c.example_id_product)||(l==null?void 0:l.example_id_product);Z(t),ee(s),F(!0)},[k,b]=a.useState(0),[M,S]=a.useState(null),[T,q]=a.useState(!1),he=t=>{S(t.clientY),q(!0)};a.useEffect(()=>{const t=n=>{if(T){const x=n.clientY,d=Math.max(0,x-M);b(d)}},s=()=>{T&&(k>100?N(null):b(0),S(null),q(!1))};return T&&(window.addEventListener("mousemove",t),window.addEventListener("mouseup",s)),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",s)}},[T,k]),a.useEffect(()=>{b(0)},[w]);const pe=t=>{S(t.touches[0].clientY)},we=t=>{if(M!==null){const s=t.touches[0].clientY,n=Math.max(0,s-M);b(n)}},ge=()=>{k>100?N(null):b(0),S(null)};a.useEffect(()=>{b(0)},[w]);const P=a.useRef(null);return a.useEffect(()=>{const t=s=>{P.current&&!P.current.contains(s.target)&&N(null)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(be,{title:"Product Page"}),e.jsxs("div",{className:"mx-auto w-full max-w-[500px] max-h-[892px] min-h-screen",children:[e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 max-w-[500px] w-full z-10 bg-main",children:[e.jsx("section",{className:"w-full h-max flex flex-row space-x-4 justify-start items-center px-4 py-2 bg-main",children:e.jsxs("div",{className:"w-full h-max flex flex-row space-x-4 items-center justify-start",children:[h?e.jsx(z,{href:route("user.dashboard"),className:"shrink-0 w-6 h-6",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",className:"w-6 h-6",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}):e.jsx("button",{className:"shrink-0 w-6 h-6",onClick:()=>window.history.back(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",className:"w-6 h-6",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),e.jsx("div",{className:"font-utama text-white font-bold text-lg",children:r.name})]})}),e.jsxs("section",{className:"w-full h-max flex flex-col space-y-3 p-4 bg-white shadow-lg",children:[e.jsxs("div",{className:"w-full h-max flex flex-col space-y-3 items-center justify-start",children:[e.jsxs("div",{className:"w-full h-9 flex flex-row space-x-4 items-center justify-start",children:[e.jsx("img",{src:l!=null&&l.image?`/storage/${l.image}`:"/storage/categories/default.png",alt:l==null?void 0:l.name,className:"w-9 h-9 rounded-full object-cover border border-gray-300"}),e.jsx("h1",{className:"text-utama text-lg font-medium text-center align-middle",children:(X=l==null?void 0:l.name)==null?void 0:X.split(" - ")[0]})]}),e.jsxs("div",{className:"w-full flex flex-row mx-auto items-center justify-center",children:[h&&e.jsx("div",{className:"flex-grow",children:e.jsx("input",{type:"tel",className:"rounded-lg bg-neutral-100 border-2 border-gray-200 px-3 w-full focus:outline-none focus:ring-0 placeholder-gray-400",placeholder:"Masukkan nomor HP",value:u,onChange:me})}),!h&&C.length>0&&e.jsxs("div",{className:"relative w-full",children:[e.jsx(Ne,{formula:(J=C[0])==null?void 0:J.formula,onChange:t=>V(t),className:"w-full pr-12"}),e.jsx("button",{onClick:fe,className:"absolute right-2 top-1/2 -translate-y-1/2 text-white transition",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"bi bi-info-circle-fill w-5 h-5 text-main",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"})})})]}),le&&e.jsx("div",{className:"fixed h-screen px-4 inset-0 z-20 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-[328px] p-4 bg-white rounded-lg shadow-lg",children:[e.jsx("div",{className:"w-full h-max flex flex-col",children:e.jsx("h2",{className:"w-full h-max text-utama text-lg font-medium text-center align-middle",children:"Contoh Format Pengisian"})}),R?e.jsx("img",{src:`/storage/${R}`,alt:"Contoh ID Pelanggan",className:"w-full"}):e.jsx("p",{className:"text-gray-500 italic w-full text-center text-md",children:"Gambar contoh ID pelanggan tidak tersedia."}),B?e.jsxs("p",{className:"text-gray-700 w-full text-center text-md font-medium",children:["Contoh ID Pelanggan:",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:B})]}):e.jsx("p",{className:"text-gray-500 italic w-full text-center text-md",children:"Contoh  ID pelanggan tidak tersedia."}),e.jsx("div",{className:"w-full h-max mt-2 flex flex-col items-center justify-center",children:e.jsx("button",{onClick:()=>{F(!1),ae({})},className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 transition",children:"MENGERTI"})})]})})]})]}),e.jsx("div",{className:"w-full h-px bg-gray-300 my-4"}),e.jsxs("div",{className:"w-full h-max flex flex-col space-y-3 items-center justify-center",children:[e.jsxs("div",{className:"w-full flex flex-row items-center justify-center py-2 rounded bg-main hover:bg-blue-700 text-white",children:[e.jsxs("button",{onClick:()=>_(!0),type:"button",className:"w-full flex flex-row space-x-2 items-center justify-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-grid-fill",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5zm8 0A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5zm-8 8A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5zm8 0A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5z"})}),e.jsx("span",{className:"text-sm font-medium",children:"Kategori"})]}),te&&e.jsx("div",{className:"fixed h-screen px-4 inset-0 z-20 flex items-center justify-center bg-gray-800 bg-opacity-50",children:e.jsxs("div",{className:"w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg p-4 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"w-full h-9 flex flex-row mx-auto items-center justify-center pr-2 py-2 rounded-lg bg-neutral-100 border-2 border-gray-200",children:[e.jsx("input",{type:"text",className:"bg-transparent border-none flex-grow focus:ring-0 focus:outline-none placeholder-gray-400 text-black",placeholder:"Cari type...",value:O,onChange:t=>se(t.target.value)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.3",className:"w-5 h-5 text-main",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.505 4.505 0 0 1 9.5 14z"})})]}),e.jsxs("div",{className:"w-full max-h-[342px] flex flex-col items-start justify-start overflow-y-auto",children:[e.jsx(z,{href:`/c=${r==null?void 0:r.name}/b=${j||(l==null?void 0:l.name)}/t=all?phone=${u}`,className:"w-full h-max flex flex-row space-x-2 items-center justify-start py-2 border-b border-b-gray-300 cursor-pointer text-main",children:e.jsx("p",{className:"text-utama text-sm text-left align-middle",children:"Tampilkan Semua"})}),G.length>0?G.map(t=>{var s;return e.jsx(z,{href:`/c=${r==null?void 0:r.name}/b=${j||(l==null?void 0:l.name)}/t=${t==null?void 0:t.name}?phone=${u}`,className:"w-full h-max flex flex-row space-x-2 items-center justify-start py-2 border-b border-b-gray-300 cursor-pointer text-black",children:e.jsx("p",{className:"text-utama text-sm text-left align-middle",children:(s=t==null?void 0:t.name)==null?void 0:s.split(" - ")[0]})},t.id)}):e.jsx("div",{className:"w-full h-max flex flex-row space-x-2 items-center justify-start py-2 border-b border-b-gray-300 cursor-pointer text-main",children:e.jsx("p",{className:"text-gray-500 text-sm text-left align-middle",children:"Tipe yang dicari tidak tersedia."})})]}),e.jsx("button",{onClick:()=>_(!1),className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 transition",children:"Tutup"})]})})]}),e.jsxs("div",{className:"w-full h-9 flex flex-row mx-auto items-center justify-center pr-2 py-2 rounded-lg bg-neutral-100 border-2 border-gray-200",children:[e.jsx("input",{id:"searchInput",type:"text",className:"bg-transparent border-none flex-grow focus:ring-0 focus:outline-none placeholder-gray-400",value:Y,onChange:t=>ne(t.target.value),placeholder:"Cari produk..."}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.3",className:"w-5 h-5 text-main",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.505 4.505 0 0 1 9.5 14z"})})]})]})]})]}),e.jsx("section",{className:"flex flex-col pt-[294px] gap-5 p-4",children:y.filter(t=>{var s;return(s=t.product_name)==null?void 0:s.toLowerCase().includes(Y.toLowerCase())}).sort((t,s)=>t.price-s.price).map(t=>{const s=new Date,n=s.toISOString().split("T")[0],x=new Date(`${n}T${t.start_cut_off}`),d=new Date(`${n}T${t.end_cut_off}`);d.setMinutes(d.getMinutes()+1);const m=t.seller_product_status===0||s>=x&&s<=d;return e.jsxs("div",{onClick:()=>{m||N(t)},className:`flex flex-col space-y-2 border py-3 px-4 rounded-lg shadow-md 
                        ${m?"bg-gray-200 opacity-70 cursor-not-allowed":"bg-white cursor-pointer"}
                    `,children:[e.jsx("h3",{className:"w-full text-utama text-sm font-medium text-justify line-clamp-3",children:t.product_name}),e.jsxs("div",{className:"flex flex-row justify-between items-center w-full mt-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("p",{className:"text-main text-lg font-semibold",children:["Rp",new Intl.NumberFormat("id-ID").format(t.price)]}),m&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Gangguan"})]}),!m&&e.jsx("button",{onClick:D=>{D.stopPropagation(),de(t)},className:"text-blue-500 flex items-center gap-1",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.5 2.5 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5"})})})]})]},t.id)})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-40 flex items-end justify-center",children:e.jsxs("div",{ref:P,className:"fixed left-1/2 bottom-0 transform -translate-x-1/2 w-full max-w-[500px] px-4 bg-white shadow-lg border-t max-h-[470px] flex flex-col justify-between rounded-t-xl transition-transform duration-200 ease-out z-50",style:{transform:`translate(-50%, ${k}px)`},children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("div",{className:"w-12 h-1.5 rounded-full bg-gray-400 hover:bg-gray-500 transition touch-none cursor-pointer",onTouchStart:pe,onTouchMove:we,onTouchEnd:ge,onMouseDown:he})}),e.jsx("div",{className:"max-h-[420px] flex flex-col space-y-2 items-start justify-start pt-3 border-t border-b border-gray-300",children:e.jsxs("div",{className:"w-full max-h-[150px] overflow-y-auto",children:[e.jsx("p",{className:"w-full text-utama font-medium text-md text-justify break-words pb-2 border-b border-gray-200",children:w.product_name}),e.jsxs("p",{className:"w-full text-gray-600 text-sm font-thin text-justify break-words my-2",children:["Deskripsi:",e.jsx("br",{}),w.description]})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between w-full py-3",children:[e.jsxs("p",{className:"text-lg text-utama text-main font-bold",children:["Rp",new Intl.NumberFormat("id-ID").format(w.price)]}),e.jsx("button",{onClick:()=>xe(w),className:"bg-main text-white px-4 py-2 rounded",children:"Checkout"})]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 z-40 flex items-end justify-center",children:e.jsxs("div",{ref:E,className:"w-full max-w-[500px] px-4 pb-2 bg-white shadow-lg border-t flex flex-col justify-between rounded-t-xl z-50 transition-transform duration-200 ease-out",children:[e.jsx("div",{className:"flex justify-center py-3",children:e.jsx("button",{onClick:()=>L(!1),className:"text-sm font-medium text-red-600 border border-red-600 px-4 py-1 rounded hover:bg-red-50 transition",children:"Tutup"})}),e.jsx("p",{className:"w-full text-utama font-medium text-xs text-center break-words py-2 border-b border-gray-200",children:"BAGIKAN DAN RAIH KOMISI"}),e.jsx("div",{className:"max-h-[420px] flex flex-col space-y-2 items-start justify-start py-2 border-t border-b border-gray-300",children:e.jsx("div",{className:"w-full max-h-[150px] overflow-y-auto",children:e.jsx("div",{children:e.jsxs("p",{className:"text-gray-600 text-xs font-thin text-justify break-words my-2",children:["Komisi hanya didapatkan jika pesanan telah memenuhi syarat dan penyebar link sudah terdaftar sebagai affiliator Muvausa Store."," ",e.jsx("a",{href:"/affiliator",className:"text-blue-600 hover:text-blue-800 transition",children:"DAFTAR AFFILIATOR"})]})})})}),e.jsxs("div",{className:"flex flex-row items-center justify-between w-full py-3",children:[e.jsxs("div",{className:"text-justify",children:[e.jsx("p",{className:"text-sm text-black font-medium",children:"Komisi"}),e.jsxs("p",{className:"text-lg text-main font-bold",children:["Rp",new Intl.NumberFormat("id-ID").format(re)]})]}),ie?e.jsx("div",{className:"w-24",children:e.jsx(ve,{src:"https://lottie.host/519fbc9d-1e9b-4ddf-ab6f-14423aabd845/MtxYOaYcV8.lottie",autoplay:!0,loop:!1,style:{width:"100%",height:"100%"}})}):e.jsxs("button",{onClick:ce,className:"bg-main text-white px-3 py-2 rounded flex items-center gap-2 hover:bg-blue-700 transition",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5 font-bold text-white",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"}),e.jsx("path",{d:"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"})]}),e.jsx("span",{className:"font-semibold text-sm",children:"Salin"})]})]})]})})]})]})}export{Se as default};
