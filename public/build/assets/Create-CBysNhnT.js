import{W as x,r as h,j as e,a as f,y as b}from"./app-YafrITPv.js";function j(){const{data:t,setData:c,errors:a,clearErrors:u}=x({first_name:"Budi",last_name:"Fetch",email:"budi.fetch@example.com",phone:"089876543210",amount:75e3}),[i,m]=h.useState(!1),r=l=>{const{name:o,value:n}=l.target;c(o,n)},d=async l=>{l.preventDefault(),u(),m(!0);try{const o=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),n=await fetch(route("payment.process"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":o},body:JSON.stringify(t)});if(!n.ok){if(n.status===422){const s=await n.json();alert("Data tidak valid. Periksa kembali isian Anda.")}throw new Error("Network response was not ok.")}const p=(await n.json()).snap_token;window.snap.pay(p,{onSuccess:s=>{console.log("Payment Success:",s),alert("Pembayaran berhasil!"),b.visit(route("payment.success"))},onPending:s=>{console.log("Payment Pending:",s),alert("Menunggu pembayaran Anda!")},onError:s=>{console.error("Payment Error:",s),alert("Pembayaran gagal!")},onClose:()=>{alert("Anda menutup popup tanpa menyelesaikan pembayaran.")}})}catch(o){console.error("There was a problem with the fetch operation:",o),alert("Terjadi kesalahan. Silakan coba lagi.")}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Form Pembayaran"}),e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800",children:"Form Pembayaran (React + Fetch)"}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700",children:"Nama Depan"}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:t.first_name,onChange:r,className:"w-full px-3 py-2 mt-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.first_name&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:a.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700",children:"Nama Belakang"}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:t.last_name,onChange:r,className:"w-full px-3 py-2 mt-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:r,className:"w-full px-3 py-2 mt-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.email&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Nomor Telepon"}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:r,className:"w-full px-3 py-2 mt-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),a.phone&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:a.phone})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:"Jumlah Pembayaran (IDR)"}),e.jsx("input",{type:"number",id:"amount",name:"amount",value:t.amount,onChange:r,className:"w-full px-3 py-2 mt-1 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,min:"1000"}),a.amount&&e.jsx("div",{className:"text-sm text-red-600 mt-1",children:a.amount})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",disabled:i,className:"w-full px-4 py-2 font-bold text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:i?"Memproses...":"Bayar Sekarang"})})]})]})})]})}export{j as default};
