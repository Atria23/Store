import{q as d,r as l,j as e}from"./app-DMmN_QQ9.js";import{d as o}from"./index-BaPIW1Y3.js";function p(){const{user:s,poinmuHistory:r}=d().props,[n,t]=l.useState(""),i=()=>{if(!n||parseInt(n)<=0){alert("Masukkan jumlah poin yang valid.");return}if(parseInt(n)>s.points){alert("Poin tidak cukup untuk diredeem.");return}confirm(`Anda yakin ingin menukar ${n} poin menjadi saldo?`)&&o.Inertia.post("/poinmu/redeem",{points:parseInt(n)},{onSuccess:()=>{t(""),alert("Poin berhasil diredeem!")},onError:a=>{alert(a.error||"Terjadi kesalahan.")}})};return e.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-white shadow rounded",children:[e.jsx("h1",{className:"text-xl font-bold mb-4",children:"Dashboard Poinmu"}),e.jsxs("div",{className:"bg-gray-100 p-4 rounded mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nama:"})," ",s.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Poin Saat Ini:"})," ",s.points," Poin"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Saldo:"})," Rp ",s.balance.toLocaleString()]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Jumlah Poin yang akan diredeem"}),e.jsx("input",{type:"number",value:n,onChange:a=>t(a.target.value),className:"border p-2 w-full rounded",min:"1"}),e.jsx("button",{onClick:i,className:"mt-2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Redeem Poin"})]}),e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Riwayat Poinmu"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded",children:r.length===0?e.jsx("p",{className:"text-gray-500",children:"Belum ada riwayat poin."}):e.jsx("ul",{children:r.map(a=>e.jsxs("li",{className:"mb-2 border-b pb-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:a.type})," (",a.points>0?"+":"",a.points," Poin)"]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(a.created_at).toLocaleString()})]},a.id))})})]})}export{p as default};
