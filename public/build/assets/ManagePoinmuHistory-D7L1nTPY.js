import{q as v,r,j as e,a as y,d as N}from"./app-DdTIVpjT.js";import{d as k}from"./index-CSPwtwab.js";const L=()=>{const{poinmuHistory:p}=v().props,[g,S]=r.useState(p),[n,f]=r.useState(""),[l,w]=r.useState(""),[i,j]=r.useState("desc"),[o,d]=r.useState(1),c=10,x=g.filter(t=>{var a;const s=n.toLowerCase();return t.id.toString().includes(s)||(((a=t.user)==null?void 0:a.name)||"").toLowerCase().includes(s)}).filter(t=>l?t.status===l:!0).sort((t,s)=>{const a=new Date(t.created_at).getTime(),h=new Date(s.created_at).getTime();return i==="desc"?h-a:a-h}),u=x.slice((o-1)*c,o*c),m=Math.ceil(x.length/c);r.useEffect(()=>{d(1)},[n,l,i]);const b=(t,s)=>{k.Inertia.put(`/poinmu-history/${t}/status`,{status:s})};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Manage History"}),e.jsxs("div",{className:"mx-auto w-full max-w-[500px] max-h-[892px] min-h-screen",children:[e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 max-w-[500px] w-full z-10 bg-main",children:[e.jsx("div",{className:"w-full h-max flex flex-row space-x-4 justify-start items-center px-4 py-2 bg-main",children:e.jsxs("div",{className:"w-full h-max flex flex-row space-x-4 items-center justify-start",children:[e.jsx("button",{className:"shrink-0 w-6 h-6",onClick:()=>window.history.back(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",className:"w-6 h-6",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),e.jsx("div",{className:"font-utama text-white font-bold text-lg",children:"Kelola Riwayat Poinmu"})]})}),e.jsxs("div",{className:"w-full h-max flex flex-col space-y-4 items-center justify-start p-4 bg-white shadow-lg",children:[e.jsxs("div",{className:"w-full h-9 flex flex-row mx-auto items-center justify-center pr-2 py-2 rounded-lg bg-neutral-100 border-2 border-gray-200",children:[e.jsx("input",{id:"searchInput",type:"text",className:"bg-transparent border-none flex-grow focus:ring-0 focus:outline-none placeholder-gray-400",placeholder:"Cari berdasarkan ID atau nama user",value:n,onChange:t=>f(t.target.value)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.3",className:"w-5 h-5 text-main",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.505 4.505 0 0 1 9.5 14z"})})]}),e.jsxs("div",{className:"w-full h-max flex flex-row space-x-4 items-center justify-start",children:[e.jsxs("button",{onClick:()=>j(t=>t==="desc"?"asc":"desc"),className:"w-full h-max flex flex-row space-x-2 items-center justify-center px-4 py-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-4 h-4 text-main",viewBox:"0 0 16 16",children:e.jsx("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1"})}),e.jsx("span",{className:"text-utama text-sm font-thin text-left align-middle text-blue-600",children:i==="desc"?"Terbaru":"Terlama"})]}),e.jsx("div",{className:"shrink-0 w-px bg-main h-6"}),e.jsx("div",{className:"w-full",children:e.jsxs("select",{className:"w-full px-4 py-2 rounded-md border border-gray-300 text-sm text-gray-700 bg-white",value:l,onChange:t=>w(t.target.value),children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"sukses",children:"Sukses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"gagal",children:"Gagal"})]})})]})]})]}),e.jsx("div",{className:"mb-4 min-h-[756px] pt-[163px] bg-white",children:u.length>0?u.map(t=>{var s;return e.jsxs("div",{className:"flex justify-between items-center p-3 border-b-2 border-b-neutral-100 w-full gap-2",children:[e.jsxs("div",{className:"flex flex-col w-full space-y-1",children:[e.jsxs(N,{href:`/poinmu-history/${t.id}`,className:"font-utama font-semibold text-sm truncate w-full max-w-[200px] text-blue-600 hover:underline",children:["ID #",t.id]}),e.jsxs("p",{className:"font-utama text-sm text-gray-600 truncate",children:["User: ",((s=t.user)==null?void 0:s.name)||"-"]}),e.jsx("p",{className:"font-utama text-xs text-gray-400",children:new Date(t.created_at).toLocaleString("id-ID")})]}),e.jsx("div",{className:"inline-block",children:e.jsxs("select",{value:t.status||"",onChange:a=>b(t.id,a.target.value||null),className:`appearance-none px-4 py-[2px] rounded-full text-[11px] font-medium
            ${t.status==="pending"?"border border-yellow-600 bg-yellow-100 text-yellow-600":t.status==="sukses"?"border border-green-600 bg-green-100 text-green-600":t.status==="gagal"?"border border-red-600 bg-red-100 text-red-600":"border border-gray-300 bg-gray-100 text-gray-500"}`,children:[e.jsx("option",{value:"",children:"-- Pilih Status --"}),e.jsx("option",{value:"sukses",children:"Sukses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"gagal",children:"Gagal"})]})})]},t.id)}):e.jsx("div",{className:"flex justify-center items-center h-full mt-6",children:e.jsx("p",{className:"text-gray-500",children:"Tidak ada data ditemukan."})})}),m>1&&e.jsx("div",{className:"w-full px-4 pb-8 flex justify-center items-center flex-wrap gap-2",children:Array.from({length:m},(t,s)=>e.jsx("button",{onClick:()=>{d(s+1),window.scrollTo({top:0,behavior:"smooth"})},className:`px-3 py-1 text-sm rounded-md border transition-all
          ${o===s+1?"bg-main text-white border-main":"bg-white text-gray-700 border-gray-300 hover:border-main hover:text-main"}`,children:s+1},s))})]})]})};export{L as default};
